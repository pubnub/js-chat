<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="47" failures="16" errors="0" time="216.256">
  <testsuite name="Send message test" errors="0" failures="16" skipped="1" timestamp="2024-11-04T17:35:00" time="216.121" tests="47">
    <testcase classname="Send message test should send and receive unicode messages correctly" name="Send message test should send and receive unicode messages correctly" time="12.299">
    </testcase>
    <testcase classname="Send message test should send and receive regular text messages correctly" name="Send message test should send and receive regular text messages correctly" time="5.292">
    </testcase>
    <testcase classname="Send message test should delete the message" name="Send message test should delete the message" time="2.166">
    </testcase>
    <testcase classname="Send message test should restore a soft deleted message" name="Send message test should restore a soft deleted message" time="3.037">
    </testcase>
    <testcase classname="Send message test should restore a soft deleted message together with its thread" name="Send message test should restore a soft deleted message together with its thread" time="8.245">
    </testcase>
    <testcase classname="Send message test should only log a warning if you try to restore an undeleted message" name="Send message test should only log a warning if you try to restore an undeleted message" time="1.534">
      <failure>PubNubException: This message has not been deleted
    at MessageImpl.PubNubException_init_$Create$ [as x21] (/Users/wojciech.kalicinski/projects/pubnub-chat/pubnub-chat-impl/build/src/commonMain/kotlin/com/pubnub/chat/internal/util/Utils.kt:47:7930)
    at Message_0.x21 [as restore] (/Users/wojciech.kalicinski/projects/pubnub-chat/pubnub-chat-impl/build/src/jsMain/kotlin/MessageJs.kt:67:24)
    at Object.restore (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:210:23)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should throw an error if you try to create a thread on a deleted message" name="Send message test should throw an error if you try to create a thread on a deleted message" time="2.093">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected value:  &quot;You cannot create threads on deleted messages&quot;
Received object: [PubNubException: You cannot create threads on deleted messages.]
    at Object.toContain (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:238:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should edit the message" name="Send message test should edit the message" time="1.652">
    </testcase>
    <testcase classname="Send message test should toggle the message reaction" name="Send message test should toggle the message reaction" time="1.718">
    </testcase>
    <testcase classname="Send message test should pin the message" name="Send message test should pin the message" time="1.91">
    </testcase>
    <testcase classname="Send message test should unpin the message" name="Send message test should unpin the message" time="2.291">
    </testcase>
    <testcase classname="Send message test should stream message updates and invoke the callback" name="Send message test should stream message updates and invoke the callback" time="3.526">
    </testcase>
    <testcase classname="Send message test should render URLs correctly" name="Send message test should render URLs correctly" time="4.391">
      <failure>TypeError: messageDraft.addMentionedUser is not a function
    at addMentionedUser (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/utils.ts:185:22)
    at Object.&lt;anonymous&gt; (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:349:58)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should add linked text correctly" name="Send message test should add linked text correctly" time="2.834">
      <failure>TypeError: this.m2m_1.h2f is not a function
    at MessageDraft.h2f [as onChange] (/Users/wojciech.kalicinski/projects/pubnub-chat/pubnub-chat-impl/build/src/jsMain/kotlin/MessageDraftJs.kt:24:22)
    at Object.onChange (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:360:18)
    at Promise.then.completed (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Send message test should throw an error for invalid link format" name="Send message test should throw an error for invalid link format" time="1.157">
      <failure>TypeError: this.m2m_1.h2f is not a function
    at MessageDraft.h2f [as onChange] (/Users/wojciech.kalicinski/projects/pubnub-chat/pubnub-chat-impl/build/src/jsMain/kotlin/MessageDraftJs.kt:24:22)
    at Object.onChange (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:383:18)
    at Promise.then.completed (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Send message test should throw an error if adding a link inside another link" name="Send message test should throw an error if adding a link inside another link" time="1.095">
      <failure>TypeError: this.m2m_1.h2f is not a function
    at MessageDraft.h2f [as onChange] (/Users/wojciech.kalicinski/projects/pubnub-chat/pubnub-chat-impl/build/src/jsMain/kotlin/MessageDraftJs.kt:24:22)
    at Object.onChange (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:401:18)
    at Promise.then.completed (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Send message test should remove a linked URL correctly" name="Send message test should remove a linked URL correctly" time="0.839">
      <failure>TypeError: this.m2m_1.h2f is not a function
    at MessageDraft.h2f [as onChange] (/Users/wojciech.kalicinski/projects/pubnub-chat/pubnub-chat-impl/build/src/jsMain/kotlin/MessageDraftJs.kt:24:22)
    at Object.onChange (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:433:18)
    at Promise.then.completed (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Send message test should report a message" name="Send message test should report a message" time="1.801">
      <failure>TypeError: channel.getMessageReportsHistory is not a function
    at Object.getMessageReportsHistory (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:479:38)</failure>
    </testcase>
    <testcase classname="Send message test should report a message (deprecated)" name="Send message test should report a message (deprecated)" time="1.44">
      <failure>TypeError: reportedMessage.DEPRECATED_report is not a function
    at Object.DEPRECATED_report (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:498:27)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should send multiple image files along with a text message correctly" name="Send message test should send multiple image files along with a text message correctly" time="4.405">
    </testcase>
    <testcase classname="Send message test should send image file along with a text message correctly" name="Send message test should send image file along with a text message correctly" time="5.192">
    </testcase>
    <testcase classname="Send message test should send pdf file along with a text message correctly" name="Send message test should send pdf file along with a text message correctly" time="4.264">
    </testcase>
    <testcase classname="Send message test should send txt file along with a text message correctly" name="Send message test should send txt file along with a text message correctly" time="4.224">
    </testcase>
    <testcase classname="Send message test should send mp4 file along with a text message correctly" name="Send message test should send mp4 file along with a text message correctly" time="22.247">
    </testcase>
    <testcase classname="Send message test should send multiple different types of files along with a text message correctly" name="Send message test should send multiple different types of files along with a text message correctly" time="5.226">
    </testcase>
    <testcase classname="Send message test shouldn&apos;t allow to send image file over 5 mb along with a text message" name="Send message test shouldn&apos;t allow to send image file over 5 mb along with a text message" time="0">
      <skipped/>
    </testcase>
    <testcase classname="Send message test should send 3 messages with proper delays and verify rate limiter" name="Send message test should send 3 messages with proper delays and verify rate limiter" time="5.371">
    </testcase>
    <testcase classname="Send message test should send long messages and validate correct rendering" name="Send message test should send long messages and validate correct rendering" time="9.789">
    </testcase>
    <testcase classname="Send message test should fail to send an empty or whitespace-only message" name="Send message test should fail to send an empty or whitespace-only message" time="1.349">
    </testcase>
    <testcase classname="Send message test should send and receive messages in various languages correctly" name="Send message test should send and receive messages in various languages correctly" time="17.201">
    </testcase>
    <testcase classname="Send message test should toggle the message reaction and then delete the message reaction" name="Send message test should toggle the message reaction and then delete the message reaction" time="2.052">
    </testcase>
    <testcase classname="Send message test should be unable to pin multiple messages" name="Send message test should be unable to pin multiple messages" time="2.34">
    </testcase>
    <testcase classname="Send message test should not allow inserting a link inside another link" name="Send message test should not allow inserting a link inside another link" time="0.78">
      <failure>TypeError: this.m2m_1.h2f is not a function
    at MessageDraft.h2f [as onChange] (/Users/wojciech.kalicinski/projects/pubnub-chat/pubnub-chat-impl/build/src/jsMain/kotlin/MessageDraftJs.kt:24:22)
    at Object.onChange (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:986:18)
    at Promise.then.completed (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/wojciech.kalicinski/projects/js-chat/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Send message test should send quote message in a Thread" name="Send message test should send quote message in a Thread" time="3.736">
    </testcase>
    <testcase classname="Send message test should pin the message inside the Thread" name="Send message test should pin the message inside the Thread" time="3.585">
    </testcase>
    <testcase classname="Send message test should encrypt and decrypt a message" name="Send message test should encrypt and decrypt a message" time="7.79">
    </testcase>
    <testcase classname="Send message test should encrypt and decrypt a file" name="Send message test should encrypt and decrypt a file" time="7.938">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 3
Received: undefined
    at Object.toBe (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:1174:55)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should still view text messages sent before enabling encryption" name="Send message test should still view text messages sent before enabling encryption" time="6.593">
    </testcase>
    <testcase classname="Send message test should still view files sent before enabling encryption" name="Send message test should still view files sent before enabling encryption" time="7.164">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 3
Received: undefined
    at Object.toBe (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:1272:51)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should be able to decrypt text and file messages sent using a previous encryption key" name="Send message test should be able to decrypt text and file messages sent using a previous encryption key" time="8.168">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 3
Received: undefined
    at Object.toBe (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:1316:60)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should send a message with custom body and transform it to TextMessageContent when received" name="Send message test should send a message with custom body and transform it to TextMessageContent when received" time="2.236">
    </testcase>
    <testcase classname="Send message test should send a message with custom body and crash if getMessageResponseBody is incorrect" name="Send message test should send a message with custom body and crash if getMessageResponseBody is incorrect" time="2.373">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Cannot read properties of undefined (reading &apos;does&apos;)&quot;
Received: &quot;Failed to retrieve getHistory data.&quot;
    at Object.toBe (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:1432:32)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should be able to pass custom edit and delete action names" name="Send message test should be able to pass custom edit and delete action names" time="3.406">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:1463:47)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Send message test should work fine even for multiple schemas on different channels" name="Send message test should work fine even for multiple schemas on different channels" time="3.254">
    </testcase>
    <testcase classname="Send message test should be able to read live messages with custom payloads as well" name="Send message test should be able to read live messages with custom payloads as well" time="2.793">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Hello live world!&quot;
Received: &quot;&quot;
    at Object.toBe (/Users/wojciech.kalicinski/projects/js-chat/lib/tests/message.test.ts:1587:29)</failure>
    </testcase>
    <testcase classname="Send message test should be able to read live encrypted messages with custom payloads" name="Send message test should be able to read live encrypted messages with custom payloads" time="5.14">
    </testcase>
    <testcase classname="Send message test should be able to read historic encrypted messages with custom payloads" name="Send message test should be able to read historic encrypted messages with custom payloads" time="2.852">
    </testcase>
  </testsuite>
</testsuites>